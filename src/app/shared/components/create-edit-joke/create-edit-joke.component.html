<form [formGroup]="form"
    (ngSubmit)="submit()">

    <div class="
    form-group">
        <mat-form-field appearance="legacy">
            <mat-label>Type a joke</mat-label>
            <textarea matInput
                formControlName="value"
                placeholder="Type a joke..."></textarea>
            <mat-error *ngIf="form.get('value').touched && form.get('value').invalid">
                Joke is required!</mat-error>
        </mat-form-field>
    </div>

    <div class="form-group">
        <mat-form-field appearance="legacy">
            <mat-label>Type icon url</mat-label>
            <input matInput
                placeholder="Type icon url"
                formControlName="iconUrl">
        </mat-form-field>
    </div>

    <div class="submit">
        <mat-form-field appearance="legacy">
            <mat-label>Choose a category</mat-label>
            <mat-select formControlName='categories'
                multiple>
                <mat-select-trigger>
                    {{getCategoriesValue(form.get('categories').value[0])  |titlecase}}
                    <span *ngIf="form.get('categories').value?.length > 1">
                        (+{{form.get('categories').value.length - 1}}
                        {{form.get('categories').value?.length === 2 ? 'other' : 'others'}})
                    </span>
                </mat-select-trigger>
                <mat-option *ngFor="let category of categoriesList"
                    [value]="category.id">{{category.title |titlecase}}</mat-option>
            </mat-select>
        </mat-form-field>


    </div>

    <div *ngIf="!formControls"
        class="
    form-group">
        <mat-form-field appearance="legacy">
            <mat-label>Add custom category</mat-label>
            <input matInput
                formControlName="customCategory"
                placeholder="Type a joke..." />
        </mat-form-field>
    </div>


    <div class="submit-group">
        <mat-spinner [diameter]="25"
            *ngIf="loading">
        </mat-spinner>
        <button class="btn"
            [disabled]="loading || this.form.invalid">{{!joke? 'Create!': 'Update!'}}</button>
    </div>
</form>
