(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"m3+q":function(e,t,o){"use strict";o.r(t),o.d(t,"CreateJokeModule",(function(){return k}));var i=o("PCNd"),n=o("ofXK"),r=o("tyNb"),a=o("fXoL"),s=o("KvfK"),c=o("bN9u"),g=o("ZGDG"),d=o("eq+F"),b=o("pDGf");function h(e,t){if(1&e&&(a.Ob(0),a.Mb(1,"app-favorite-card",8),a.Nb()),2&e){const e=a.bc();a.zb(1),a.hc("joke",e.joke)}}function f(e,t){1&e&&a.Mb(0,"app-empty-container",9)}let u=(()=>{class e{constructor(e,t){this.jokeService=e,this.jokesDataService=t,this.errorMessage="",this.loading=!1,this.categoriesList=[]}ngOnInit(){this.getCategories(),this.jokeService.removeBufferJoke()}getCategories(){this.jokesDataService.fetchCategories().subscribe(e=>{this.categoriesList=[...e]})}onNewJoke(e){this.loading=!0,e.customCategories?this.jokesDataService.postCategory(e.customCategories).subscribe(t=>{e.categories=e.categories.map(e=>this.getCategoriesId(""+e)),e.categories.unshift(t.id),this.postJoke(e)}):this.postJoke(e)}postJoke(e){this.jokesDataService.postJoke(e).subscribe(e=>{this.jokeService.setBufferJoke(e),this.jokeService.currentBufferJoke.subscribe(e=>{this.joke=e}),this.jokesDataService.openSnackBar("Created!"),this.getCategories()},()=>this.jokesDataService.openSnackBar("Something went wrong...")).add(()=>{this.loading=!1})}getCategoriesId(e){var t;return null===(t=this.categoriesList.find(t=>t.title===e))||void 0===t?void 0:t.id}}return e.\u0275fac=function(t){return new(t||e)(a.Lb(s.a),a.Lb(c.a))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-create-joke-page"]],decls:12,vars:4,consts:[[1,"container"],[1,"nav"],["href","#","routerLink","/",1,"btn","route"],[1,"form-container"],[3,"loadingState","categoryList","modifyOnJoke"],[1,"cards"],[4,"ngIf","ngIfElse"],["empty",""],[3,"joke"],["title","Create your first joke :)"]],template:function(e,t){if(1&e&&(a.Qb(0,"div",0),a.Qb(1,"div",1),a.Qb(2,"a",2),a.wc(3," Home "),a.Pb(),a.Qb(4,"h3"),a.wc(5,"Create Joke"),a.Pb(),a.Pb(),a.Qb(6,"div",3),a.Qb(7,"app-joke-modify-form",4),a.Xb("modifyOnJoke",(function(e){return t.onNewJoke(e)})),a.Pb(),a.Qb(8,"div",5),a.uc(9,h,2,1,"ng-container",6),a.Pb(),a.Pb(),a.Pb(),a.uc(10,f,1,0,"ng-template",null,7,a.vc)),2&e){const e=a.mc(11);a.zb(7),a.hc("loadingState",t.loading)("categoryList",t.categoriesList),a.zb(2),a.hc("ngIf",t.joke)("ngIfElse",e)}},directives:[r.c,g.a,n.k,d.a,b.a],styles:[".container[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{margin:0 auto;display:flex;justify-content:center}@media (max-width:600px){.container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}.cards[_ngcontent-%COMP%]{height:80vh;overflow-y:auto;width:480px}.cards[_ngcontent-%COMP%]::-webkit-scrollbar{width:2px;height:2px}.cards[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{height:2px;background-color:#8ea7ff;border-radius:40px}@media (max-width:600px){.cards[_ngcontent-%COMP%]{width:100%}}"]}),e})();var p=o("Tk1w");let k=(()=>{class e{}return e.\u0275mod=a.Jb({type:e}),e.\u0275inj=a.Ib({factory:function(t){return new(t||e)},providers:[p.a],imports:[[n.c,i.a,r.d.forChild([{path:"",component:u,canActivate:[p.a]}])]]}),e})()}}]);