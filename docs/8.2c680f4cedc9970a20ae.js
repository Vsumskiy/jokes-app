(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"2DGb":function(e,t,i){"use strict";i.r(t),i.d(t,"EditJokeModule",(function(){return v}));var o=i("ofXK"),n=i("tyNb"),r=i("PCNd"),s=i("Tk1w"),a=i("fXoL"),c=i("KvfK"),d=i("bN9u"),g=i("ZGDG"),b=i("eq+F"),f=i("pDGf"),h=i("Xa2L");function u(e,t){if(1&e){const e=a.Rb();a.Ob(0),a.Qb(1,"app-joke-modify-form",9),a.Xb("modifyOnJoke",(function(t){return a.oc(e),a.bc(2).onEditJoke(t)})),a.Pb(),a.Qb(2,"div",7),a.Mb(3,"app-favorite-card",10),a.Pb(),a.Nb()}if(2&e){const e=a.bc(2);a.zb(1),a.hc("joke",e.joke)("modifyJokeMode",!0)("categoryList",e.categoriesList)("loadingState",e.loadingForm),a.zb(2),a.hc("joke",e.joke)("remove",!0)("edit",!1)}}function k(e,t){if(1&e&&(a.Ob(0,7),a.uc(1,u,4,7,"ng-container",8),a.Nb()),2&e){const e=a.bc(),t=a.mc(9);a.zb(1),a.hc("ngIf",e.joke)("ngIfElse",t)}}function l(e,t){1&e&&a.Mb(0,"app-empty-container",11)}function p(e,t){1&e&&a.Mb(0,"mat-spinner")}let m=(()=>{class e{constructor(e,t,i){this.route=e,this.jokeService=t,this.jokesDataService=i,this.loading=!1,this.loadingForm=!1,this.errorMessage="",this.categoriesList=[]}ngOnInit(){this.getCurrentJoke(),this.getCategories()}onEditJoke(e){this.loadingForm=!0,e.id=this.joke.id,e.categories=e.categories.map(e=>this.getCategoriesId(""+e)),this.jokesDataService.editJoke(e).subscribe(e=>{this.jokesDataService.openSnackBar("Updated!"),this.jokeService.setBufferJoke(e),this.jokeService.refreshJokes(e)},()=>this.jokesDataService.openSnackBar("Something went wrong...!")).add(()=>{this.loadingForm=!1})}getCurrentJoke(){this.loading=!0,this.route.params.subscribe(e=>{this.jokesDataService.getJokeByIdFromApi(e.id).subscribe(e=>{this.jokeService.setBufferJoke(e),this.jokeService.currentBufferJoke.subscribe(e=>{this.joke=e})}).add(()=>this.loading=!1)})}getCategoriesId(e){var t;return null===(t=this.categoriesList.find(t=>t.title===e))||void 0===t?void 0:t.id}getCategories(){this.jokesDataService.fetchCategories().subscribe(e=>{this.categoriesList=[...e]})}}return e.\u0275fac=function(t){return new(t||e)(a.Lb(n.a),a.Lb(c.a),a.Lb(d.a))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-edit-joke-page"]],decls:12,vars:2,consts:[[1,"container"],[1,"nav"],["href","#","routerLink","/",1,"btn"],[1,"container-inner"],["class","cards",4,"ngIf","ngIfElse"],["empty",""],["loader",""],[1,"cards"],[4,"ngIf","ngIfElse"],[3,"joke","modifyJokeMode","categoryList","loadingState","modifyOnJoke"],[3,"joke","remove","edit"],["title","No jokes to update"]],template:function(e,t){if(1&e&&(a.Qb(0,"div",0),a.Qb(1,"div",1),a.Qb(2,"a",2),a.wc(3," Home "),a.Pb(),a.Qb(4,"h3"),a.wc(5,"Jokes editor"),a.Pb(),a.Pb(),a.Qb(6,"div",3),a.uc(7,k,2,2,"ng-container",4),a.uc(8,l,1,0,"ng-template",null,5,a.vc),a.uc(10,p,1,0,"ng-template",null,6,a.vc),a.Pb(),a.Pb()),2&e){const e=a.mc(11);a.zb(7),a.hc("ngIf",!t.loading)("ngIfElse",e)}},directives:[n.c,o.k,g.a,b.a,f.a,h.b],styles:[".container[_ngcontent-%COMP%]{width:100%}.container-inner[_ngcontent-%COMP%]{margin:0 auto;display:flex;justify-content:center}@media (max-width:600px){.container-inner[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}.cards[_ngcontent-%COMP%]{height:80vh;overflow-y:auto;width:480px}@media (max-width:600px){.cards[_ngcontent-%COMP%]{width:100%}}"]}),e})(),v=(()=>{class e{}return e.\u0275mod=a.Jb({type:e}),e.\u0275inj=a.Ib({factory:function(t){return new(t||e)},providers:[s.a],imports:[[o.c,r.a,n.d.forChild([{path:"",component:m,canActivate:[s.a]}])]]}),e})()}}]);