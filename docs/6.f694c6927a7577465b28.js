(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"/jVZ":function(t,e,o){"use strict";o.r(e),o.d(e,"CategoryCustomizationModule",(function(){return Q}));var a=o("Tk1w"),n=o("PCNd"),r=o("ofXK"),i=o("tyNb"),c=o("1uah"),s=o("fXoL"),g=o("bN9u"),d=o("S9hJ"),b=o("bTqV"),u=o("3Pt+"),m=o("kmnG"),l=o("qFsG"),f=o("4cth"),p=o("d3UM"),y=o("FKr1"),C=o("Xa2L");function h(t,e){1&t&&(s.Qb(0,"mat-error"),s.wc(1," Category already exist!"),s.Pb())}function M(t,e){if(1&t&&(s.Qb(0,"div",5),s.Qb(1,"mat-form-field",6),s.Qb(2,"mat-label"),s.wc(3,"Add new category"),s.Pb(),s.Mb(4,"input",7),s.uc(5,h,2,0,"mat-error",8),s.Pb(),s.Pb()),2&t){const t=s.bc();s.zb(5),s.hc("ngIf",t.form.get("customCategory").hasError("duplicate"))}}function P(t,e){if(1&t&&(s.Qb(0,"span"),s.wc(1),s.Pb()),2&t){const t=s.bc(2);s.zb(1),s.zc(" (+",t.form.get("categoryList").value.length-1," ",2===(null==t.form.get("categoryList").value?null:t.form.get("categoryList").value.length)?"other":"others",") ")}}function v(t,e){if(1&t&&(s.Qb(0,"mat-option",11),s.wc(1),s.cc(2,"titlecase"),s.Pb()),2&t){const t=e.$implicit;s.hc("value",t.id),s.zb(1),s.yc("",s.dc(2,2,t.title)," ")}}function w(t,e){if(1&t&&(s.Qb(0,"div",5),s.Qb(1,"mat-form-field",6),s.Qb(2,"mat-label"),s.wc(3,"Remove category"),s.Pb(),s.Qb(4,"mat-select",9),s.Qb(5,"mat-select-trigger"),s.wc(6),s.cc(7,"titlecase"),s.uc(8,P,2,2,"span",8),s.Pb(),s.uc(9,v,3,4,"mat-option",10),s.Pb(),s.Pb(),s.Pb()),2&t){const t=s.bc();s.zb(6),s.yc(" ",t.form.get("categoryList").value?t.getCategoriesValue(t.form.get("categoryList").value[0]):s.dc(7,3,"")," "),s.zb(2),s.hc("ngIf",(null==t.form.get("categoryList").value?null:t.form.get("categoryList").value.length)>1),s.zb(1),s.hc("ngForOf",t.categories)}}function S(t,e){1&t&&s.Mb(0,"mat-spinner",12),2&t&&s.hc("diameter",25)}let O=(()=>{class t{constructor(t){this.fb=t,this.addCategoryMode=!1,this.modifyCategories=new s.n}ngOnInit(){this.setForm()}setForm(){this.form=this.fb.group(this.addCategoryMode?{customCategory:[null,[u.r.required,u.r.minLength(3)]]}:{categoryList:[null,[u.r.required]]})}submit(){this.form.valid&&this.form.enable&&(this.modifyCategories.emit(this.form.value),this.form.reset())}getCategoriesValue(t){var e;return null===(e=this.categories.find(e=>e.id===t))||void 0===e?void 0:e.title}}return t.\u0275fac=function(e){return new(e||t)(s.Lb(u.d))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-category-form"]],inputs:{addCategoryMode:"addCategoryMode",categories:"categories",loadingState:"loadingState"},outputs:{modifyCategories:"modifyCategories"},decls:7,vars:7,consts:[["autocomplete","off",1,"form-modify",3,"formGroup","submit"],["class","form-group",4,"ngIf"],[1,"submit-group"],[3,"diameter",4,"ngIf"],["mat-raised-button","",3,"color","disabled"],[1,"form-group"],["appearance","legacy"],["matInput","","appCategoryExistValidator","","placeholder","Type category","formControlName","customCategory"],[4,"ngIf"],["formControlName","categoryList","multiple",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"diameter"]],template:function(t,e){1&t&&(s.Qb(0,"form",0),s.Xb("submit",(function(){return e.submit()})),s.uc(1,M,6,1,"div",1),s.uc(2,w,10,5,"div",1),s.Qb(3,"div",2),s.uc(4,S,1,1,"mat-spinner",3),s.Qb(5,"button",4),s.wc(6),s.Pb(),s.Pb(),s.Pb()),2&t&&(s.hc("formGroup",e.form),s.zb(1),s.hc("ngIf",e.addCategoryMode),s.zb(1),s.hc("ngIf",!e.addCategoryMode),s.zb(2),s.hc("ngIf",e.loadingState||e.form.pending),s.zb(1),s.hc("color",e.addCategoryMode?"primary":"accent")("disabled",e.loadingState||e.form.invalid||e.form.pending),s.zb(1),s.yc("",e.addCategoryMode?"Create!":"Delete!"," "))},directives:[u.s,u.n,u.f,r.l,b.b,m.c,m.f,l.a,u.c,f.a,u.m,u.e,m.b,p.a,p.c,r.k,y.f,C.b],pipes:[r.r],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px;background:#fff;box-shadow:0 4px 6px rgba(0,0,0,.1);border-radius:6px;max-width:500px;margin:50px auto 0}form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}form[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:20px}form[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{margin:0 15px}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin:20 0;max-width:500px}.submit-group[_ngcontent-%COMP%]{margin-top:20px;align-self:center;position:relative}.submit-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff}.submit-group[_ngcontent-%COMP%]   .mat-spinner[_ngcontent-%COMP%]{position:absolute;right:-30px;top:10px}"]}),t})();function _(t,e){if(1&t){const t=s.Rb();s.Qb(0,"app-category-form",9),s.Xb("modifyCategories",(function(e){return s.oc(t),s.bc().addNewCategory(e.customCategory)})),s.Pb()}if(2&t){const t=s.bc();s.hc("addCategoryMode",t.addCategoryMode)("loadingState",t.loadingState)}}function x(t,e){if(1&t){const t=s.Rb();s.Qb(0,"app-category-form",10),s.Xb("modifyCategories",(function(e){return s.oc(t),s.bc().removeCategories(e.categoryList)})),s.Pb()}if(2&t){const t=s.bc();s.hc("categories",t.categoriesList)("addCategoryMode",t.addCategoryMode)("loadingState",t.loadingState)}}let k=(()=>{class t{constructor(t){this.jokesDataService=t,this.categoriesList=[],this.addCategoryMode=!0,this.errorMessage=""}ngOnInit(){this.getCategories()}addNewCategory(t){this.loadingState=!0,this.jokesDataService.postCategory(t).subscribe(()=>{this.jokesDataService.openSnackBar(`Category ${t} was added!`),this.getCategories()},t=>this.jokesDataService.openSnackBar("Something went wrong...")).add(()=>{this.loadingState=!1})}removeCategories(t){this.loadingState=!0;const e=t.map(t=>this.jokesDataService.deleteCategory(t));Object(c.a)(...e).subscribe(()=>{this.jokesDataService.openSnackBar("Deleted!"),this.getCategories()},t=>this.jokesDataService.openSnackBar("Something went wrong...")).add(()=>{this.loadingState=!1})}getCategories(){this.jokesDataService.fetchCategories().subscribe(t=>{this.categoriesList=t})}}return t.\u0275fac=function(e){return new(e||t)(s.Lb(g.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-edit-categories-page"]],decls:9,vars:2,consts:[["title","Edit Categories"],[1,"container"],[1,"buttons"],["mat-raised-button","","color","primary","type","button",3,"click"],["src","assets/images/create.svg","alt",""],["mat-raised-button","","color","accent","type","button",3,"click"],["src","assets/images/delete.svg","alt",""],[3,"addCategoryMode","loadingState","modifyCategories",4,"ngIf"],[3,"categories","addCategoryMode","loadingState","modifyCategories",4,"ngIf"],[3,"addCategoryMode","loadingState","modifyCategories"],[3,"categories","addCategoryMode","loadingState","modifyCategories"]],template:function(t,e){1&t&&(s.Mb(0,"app-toolbar",0),s.Qb(1,"div",1),s.Qb(2,"div",2),s.Qb(3,"button",3),s.Xb("click",(function(){return e.addCategoryMode=!0})),s.Mb(4,"img",4),s.Pb(),s.Qb(5,"button",5),s.Xb("click",(function(){return e.addCategoryMode=!1})),s.Mb(6,"img",6),s.Pb(),s.Pb(),s.uc(7,_,1,2,"app-category-form",7),s.uc(8,x,1,3,"app-category-form",8),s.Pb()),2&t&&(s.zb(7),s.hc("ngIf",e.addCategoryMode),s.zb(1),s.hc("ngIf",!e.addCategoryMode))},directives:[d.a,b.b,r.l,O],styles:[".container[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.container[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px 10px 0}.container[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:invert(1)}"]}),t})(),Q=(()=>{class t{}return t.\u0275mod=s.Jb({type:t}),t.\u0275inj=s.Ib({factory:function(e){return new(e||t)},providers:[a.a],imports:[[r.c,n.a,i.e.forChild([{path:"",component:k,canActivate:[a.a]}])]]}),t})()}}]);