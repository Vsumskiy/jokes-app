(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"2DGb":function(e,t,i){"use strict";i.r(t),i.d(t,"EditJokeModule",(function(){return J}));var o=i("ofXK"),n=i("tyNb"),r=i("PCNd"),s=i("Tk1w"),a=i("/ISb"),c=i("fXoL"),d=i("KvfK"),g=i("bN9u"),b=i("S9hJ"),f=i("ZGDG"),h=i("eq+F"),u=i("pDGf"),k=i("Xa2L");function l(e,t){if(1&e){const e=c.Rb();c.Ob(0),c.Qb(1,"app-joke-modify-form",8),c.Xb("modifyOnJoke",(function(t){return c.oc(e),c.bc(2).onEditJoke(t)})),c.Pb(),c.Qb(2,"div",6),c.Mb(3,"app-favorite-card",9),c.Pb(),c.Nb()}if(2&e){const e=c.bc(2);c.zb(1),c.hc("joke",e.joke)("modifyJokeMode",!0)("categoryList",e.categoriesList)("loadingState",e.loadingForm),c.zb(2),c.hc("joke",e.joke)("remove",!0)("edit",!1)}}function p(e,t){if(1&e&&(c.Ob(0,6),c.uc(1,l,4,7,"ng-container",7),c.Nb()),2&e){const e=c.bc(),t=c.mc(5);c.zb(1),c.hc("ngIf",e.joke)("ngIfElse",t)}}function m(e,t){1&e&&c.Mb(0,"app-empty-container",10)}function v(e,t){1&e&&c.Mb(0,"mat-spinner")}let j=(()=>{class e{constructor(e,t,i,o){this.route=e,this.jokeService=t,this.jokesDataService=i,this.jokesMediaService=o,this.loading=!1,this.loadingForm=!1,this.errorMessage="",this.categoriesList=[]}ngOnInit(){this.getCurrentJoke(),this.getCategories()}onEditJoke(e){this.loadingForm=!0,e.id=this.joke.id,e.categories=e.categories.map(e=>this.getCategoriesId(""+e)),this.jokesDataService.editJoke(e).subscribe(e=>{this.jokesDataService.openSnackBar("Updated!"),e.imageUrls=this.joke.imageUrls,this.jokeService.setBufferJoke(e),this.jokeService.refreshJokes(e)},()=>this.jokesDataService.openSnackBar("Something went wrong...!")).add(()=>{this.loadingForm=!1})}getCurrentJoke(){this.loading=!0,this.route.params.subscribe(e=>{this.jokesDataService.getJokeByIdFromApi(e.id).subscribe(e=>{this.jokeService.setBufferJoke(e),this.jokeService.currentBufferJoke.subscribe(e=>{this.joke=e})}).add(()=>this.loading=!1)})}getCategoriesId(e){var t;return null===(t=this.categoriesList.find(t=>t.title===e))||void 0===t?void 0:t.id}getCategories(){this.jokesDataService.fetchCategories().subscribe(e=>{this.categoriesList=[...e]})}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(n.a),c.Lb(d.a),c.Lb(g.a),c.Lb(a.a))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-edit-joke-page"]],features:[c.yb([a.a])],decls:8,vars:2,consts:[["title","Jokes Editor"],[1,"container"],[1,"container-inner"],["class","cards",4,"ngIf","ngIfElse"],["empty",""],["loader",""],[1,"cards"],[4,"ngIf","ngIfElse"],[3,"joke","modifyJokeMode","categoryList","loadingState","modifyOnJoke"],[3,"joke","remove","edit"],["title","No jokes to update"]],template:function(e,t){if(1&e&&(c.Mb(0,"app-toolbar",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.uc(3,p,2,2,"ng-container",3),c.uc(4,m,1,0,"ng-template",null,4,c.vc),c.uc(6,v,1,0,"ng-template",null,5,c.vc),c.Pb(),c.Pb()),2&e){const e=c.mc(7);c.zb(3),c.hc("ngIf",!t.loading)("ngIfElse",e)}},directives:[b.a,o.l,f.a,h.a,u.a,k.b],styles:[".container[_ngcontent-%COMP%]{width:100%}.container-inner[_ngcontent-%COMP%]{margin:0 auto;display:flex;justify-content:center}@media (max-width:600px){.container-inner[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}.cards[_ngcontent-%COMP%]{height:80vh;overflow-y:auto;width:480px}@media (max-width:600px){.cards[_ngcontent-%COMP%]{width:100%}}"]}),e})(),J=(()=>{class e{}return e.\u0275mod=c.Jb({type:e}),e.\u0275inj=c.Ib({factory:function(t){return new(t||e)},providers:[s.a],imports:[[o.c,r.a,n.e.forChild([{path:"",component:j,canActivate:[s.a]}])]]}),e})()}}]);